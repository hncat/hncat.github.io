"use strict";(self.webpackChunkfar_blog=self.webpackChunkfar_blog||[]).push([[1861],{6262:(s,i)=>{i.A=(s,i)=>{const a=s.__vccOpts||s;for(const[s,n]of i)a[s]=n;return a}},8886:(s,i,a)=>{a.r(i),a.d(i,{comp:()=>k,data:()=>t});var n=a(641);const h=[(0,n.Fv)('<div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// a.c</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">extern</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> shared;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  int</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  swap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">a, </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">shared);</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// b.c</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> shared </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> swap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  *</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">a </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">^=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">b </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">^=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">a </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">^=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">b;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">gcc</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a.c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> b.c</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -O2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_1-空间与地址分配" tabindex="-1"><a class="header-anchor" href="#_1-空间与地址分配"><span>1. 空间与地址分配</span></a></h2><div class="hint-container note"><p class="hint-container-title">注</p><p>链接的过程就是将几个输入目标文件加工合并成一个输出文件的过程。</p></div><h3 id="_1-1-按序叠加" tabindex="-1"><a class="header-anchor" href="#_1-1-按序叠加"><span>1.1 按序叠加</span></a></h3><div class="hint-container note"><p class="hint-container-title">注</p><p>什么是按序叠加？<br> 就是将各个目标文件依次合并。但是这样会有些问题，当输入文件很多时，如果每个段都分别有.text段、.data段和.bss段，那最后输出文件将会有成百上千零散的段。这种做法是很浪费内存空间的（主要原因是内存对齐），对于x86的硬件来说，段的装载地址和空间的对齐单位是页，也就是4096字节。就算一个段只有1字节的大小，那这个段也要占据4096字节的内存大小。这会导致大量的内存碎片。</p></div><figure><img src="/image/linker/chapter03/按序叠加内存分配.png" alt="按序叠加内存分配" tabindex="0" loading="lazy"><figcaption>按序叠加内存分配</figcaption></figure><h3 id="_1-2-相似段合并" tabindex="-1"><a class="header-anchor" href="#_1-2-相似段合并"><span>1.2 相似段合并</span></a></h3><div class="hint-container note"><p class="hint-container-title">注</p><p>什么是相似段合并？<br> 就是将相同性质的段进行合并，比如将所有输入文件的&quot;.text&quot;合并到输出文件的&quot;.text&quot;段，接着是&quot;.data&quot;段，&quot;.bss&quot;段等。</p></div><figure><img src="/image/linker/chapter03/相似段合并.png" alt="相似段合并" tabindex="0" loading="lazy"><figcaption>相似段合并</figcaption></figure><div class="hint-container important"><p class="hint-container-title">重要</p><p>.bss段在目标文件和可执行文件中不占用文件的空间，但是它在装载时占用地址空间。所以链接器在合并各个段的同时，也将&quot;.bss&quot;段合并，同时分配虚拟空间。<br> 关于地址和空间的两个含义：</p><ol><li>输出的可执行文件中的空间。</li><li>装载后的虚拟地址中的虚拟地址空间。<br> 对于&quot;.text&quot;和&quot;.data&quot;，它们在文件中和虚拟地址都要分配空间，对于&quot;.bss&quot;这样的段，分配空间只局限与虚拟地址空间，因为它在文件中并没有内容。</li></ol></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>两步链接</p><ol><li><mark>空间与地址分配</mark> 扫描所有的输入目标文件，并且获得它们的各个段的长度、属性和位置，并且将输入目标文件中的符号表中所有的符号定义和符号引用收集起来，统一放到一个全局符号表。这一步连接器将能够获得所有输入目标文件的段长度，并且将它们合并，计算输出文件中各个段合并后的长度和位置，并建立映射关系。</li><li><mark>符号解析与重定位</mark> 使用上一步中收集到的所有信息，读取输入文件中段的数据、重定位信息，并且进行符号解析与重定位、调整代码中的地址等。</li></ol></div><p>使用objdump指令查看链接前后的地址分配情况。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># VMA: 虚拟地址 LMA: 加载地址</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">objdump</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a.o</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">a.o:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> format</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> elf64-x86-64</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Sections:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Idx</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          Size</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      VMA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">               LMA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">               File</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> off</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Algn</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">         00000058</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000040</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> RELOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CODE</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .data</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">         00000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000098</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  2</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .bss</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">          00000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000098</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  ALLOC</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .comment</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      00000027</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000098</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .note.GNU-stack</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000000bf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  5</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .note.gnu.property</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00000020</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000000c0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  6</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .eh_frame</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     00000038</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000000e0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> RELOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">objdump</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> b.o</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">b.o:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> format</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> elf64-x86-64</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Sections:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Idx</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          Size</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      VMA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">               LMA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">               File</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> off</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Algn</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">         0000004f</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000040</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CODE</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .data</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">         00000004</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000090</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">2</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  2</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .bss</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">          00000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000094</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  ALLOC</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .comment</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      00000027</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000094</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .note.GNU-stack</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000000bb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  5</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .note.gnu.property</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00000020</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000000c0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  6</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .eh_frame</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     00000038</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000000e0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> RELOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">objdump</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ab</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ab:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> format</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> elf64-x86-64</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Sections:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Idx</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          Size</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      VMA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">               LMA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">               File</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> off</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  Algn</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .interp</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">       0000001c</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000318</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000318</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000318</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .note.gnu.property</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00000030</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000338</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000338</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000338</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  2</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .note.gnu.build-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00000024</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000368</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000368</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000368</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">2</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .note.ABI-tag</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00000020</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000000000000038c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000000000000038c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  0000038c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">2</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .gnu.hash</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     00000024</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00000000000003b0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00000000000003b0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000003b0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  5</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .dynsym</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">       000000a8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00000000000003d8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00000000000003d8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000003d8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  6</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .dynstr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">       000000a3</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000480</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000480</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000480</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  7</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .gnu.version</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  0000000e</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000524</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000524</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000524</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">1</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .gnu.version_r</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00000040</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000538</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000538</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000538</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  9</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .rela.dyn</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     000000c0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000578</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000578</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000578</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .rela.plt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     00000018</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000638</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000638</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00000638</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .init</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">         0000001b</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000001000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000001000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00001000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">2</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CODE</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .plt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">          00000020</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000001020</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000001020</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00001020</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">4</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CODE</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .plt.got</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      00000010</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000001040</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000001040</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00001040</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">4</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CODE</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 14</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .plt.sec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      00000010</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000001050</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000001050</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00001050</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">4</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CODE</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 15</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">         00000190</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000001060</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000001060</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00001060</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">4</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CODE</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 16</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .fini</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">         0000000d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00000000000011f0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00000000000011f0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000011f0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">2</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> CODE</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 17</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .rodata</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       00000004</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000002000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000002000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00002000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">2</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 18</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .eh_frame_hdr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 0000003c</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000002004</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000002004</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00002004</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">2</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 19</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .eh_frame</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     000000cc</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000002040</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000002040</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00002040</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 20</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .init_array</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   00000008</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  0000000000003db8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  0000000000003db8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00002db8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 21</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .fini_array</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   00000008</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  0000000000003dc0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  0000000000003dc0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00002dc0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 22</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .dynamic</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      000001f0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  0000000000003dc8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  0000000000003dc8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00002dc8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 23</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .got</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">          00000048</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  0000000000003fb8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  0000000000003fb8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00002fb8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 24</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .data</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">         00000014</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000004000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000004000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00003000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALLOC,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOAD,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DATA</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 25</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .bss</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">          00000004</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000004014</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000004014</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00003014</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  ALLOC</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 26</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .comment</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">      00000026</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  00003014</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">**</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">                  CONTENTS,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> READONLY</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-符号地址的确定" tabindex="-1"><a class="header-anchor" href="#_1-3-符号地址的确定"><span>1.3 符号地址的确定</span></a></h3><div class="hint-container note"><p class="hint-container-title">注</p><p>在第一步的扫描和空间分配阶段，各个段在链接后的虚拟地址空间已经确定。比如&quot;.text&quot;段的起始地址为0x0000000000001060，&quot;.data&quot;段的起始地址为0x0000000000004000。因为各个符号在段内的相对位置时固定的，所以这时&quot;main&quot;、&quot;shared&quot;和&quot;swap&quot;的地址也已经确定了，连接器通过给每个符号加上一个偏移量，使它们能够调整到正确的虚拟地址。比如我们假设&quot;a.o&quot;中的&quot;main&quot;函数相对于&quot;a.o&quot;的&quot;.text&quot;段的偏移量为X，但是经过链接合并后，&quot;a.o&quot;的&quot;.text&quot;段位于虚拟地址空间0x0000000000001060(这里是链接成可执行文件ab后在可执行文件ab中的偏移量)，那么&quot;main&quot;函数的虚拟地址应该是0x0000000000001060+X。</p></div><h2 id="_2-符号解析与重定位" tabindex="-1"><a class="header-anchor" href="#_2-符号解析与重定位"><span>2. 符号解析与重定位</span></a></h2><h3 id="_2-1-重定位" tabindex="-1"><a class="header-anchor" href="#_2-1-重定位"><span>2.1 重定位</span></a></h3><div class="hint-container note"><p class="hint-container-title">注</p><p>使用objdump -d查看反汇编结果</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">objdump</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a.o</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">a.o:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> format</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> elf64-x86-64</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Disassembly</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> section</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text.startup:</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000000</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">mai</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   0:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   f3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 0f</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 1e</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> fa</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">             endbr64</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   4:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   48</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 83</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 18</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">             sub</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    $0x18</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,%rsp</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   8:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 8d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 35</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    lea</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0x0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%rip</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,%rsi</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        # f &lt;main+0xf&gt; 将shared地址写入第二个参数</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   f:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 8b</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 04</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 25</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 28</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    mov</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    %fs:0x28,%rax</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  16:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  18:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   48</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 89</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 44</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 08</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          mov</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    %rax,0x8</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%rsp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  1d:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   31</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> c0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                   xor</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    %eax,%eax</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  1f:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 8d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 7c</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          lea</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0x4</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%rsp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,%rdi</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  24:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   c7</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 44</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 04</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    movl</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">   $0x64</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,0x4</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%rsp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  2b:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   00</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  2c:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   e8</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          call</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   31</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">main+0x3</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">1&gt;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  31:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 8b</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 44</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 08</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0x8</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%rsp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,%rax</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  36:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 2b</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 04</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 25</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 28</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    sub</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    %fs:0x28,%rax</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  3d:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  3f:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   75</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                   jne</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    48</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">main+0x4</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">8&gt;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  41:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   31</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> c0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                   xor</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    %eax,%eax</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  43:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   48</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 83</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> c4</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 18</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">             add</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    $0x18</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,%rsp</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  47:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   c3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                      ret</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  48:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   e8</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          call</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   4d</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">main+0x4</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">d</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>由于此时还并没有进行链接（即没有执行链接的第一步：<mark>虚拟地址内存分配</mark>）所以main的起始地址为0。<br> shared地址在反汇编代码的0x08字节处标记为0(8:48 8d 35 <mark>00 00 00 00</mark> lea 0x0(%rip),%rsi)后面四字节就是该指令的<mark>下一条指令的偏移量</mark>。<br> swap调用处的地址在反汇编代码的0x2c字节处同样被标记为0(2c:e8 <mark>00 00 00 00</mark> call 31 &lt;main+0x31&gt;)后面四个字节就是被调用函数的相对于调用指令的<mark>下一条指令的偏移量</mark>。<br> 此时的指令地址时暂时的，真正的地址计算工作留给了连接器。连接器在完成第一步的虚拟内存分配后就可以确定所有符号的虚拟地址了。</p></div><h4 id="修正后的地址" tabindex="-1"><a class="header-anchor" href="#修正后的地址"><span>修正后的地址</span></a></h4><div class="hint-container important"><p class="hint-container-title">重要</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">objdump</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ab</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ab:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> format</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> elf64-x86-64</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">...</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> # 截取了部分</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Disassembly</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> section</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text:</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000001060</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">mai</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    1060:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">       f3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 0f</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 1e</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> fa</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">             endbr64</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    1064:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       48</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 83</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ec</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 18</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">             sub</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    $0x18</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,%rsp</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    1068:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 8d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 35</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 2f</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    lea</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0x2fa1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%rip</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,%rsi</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        # 4010 &lt;shared&gt;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    106f:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 8b</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 04</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 25</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 28</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    mov</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    %fs:0x28,%rax</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    1076:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    1078:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       48</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 89</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 44</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 08</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          mov</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    %rax,0x8</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%rsp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    107d:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       31</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> c0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                   xor</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    %eax,%eax</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    107f:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 8d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 7c</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 04</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          lea</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0x4</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%rsp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,%rdi</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    1084:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">       c7</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 44</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 04</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    movl</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">   $0x64</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,0x4</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%rsp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    108b:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       00</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    108c:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">       e8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 0f</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 01</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          call</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   11a0</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">swa</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">p</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    1091:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 8b</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 44</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 24</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 08</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0x8</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%rsp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,%rax</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    1096:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 2b</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 04</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 25</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 28</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    sub</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    %fs:0x28,%rax</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    109d:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       00</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    109f:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       75</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                   jne</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    10a8</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">main+0x4</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">8&gt;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    10a1:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       31</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> c0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                   xor</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    %eax,%eax</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    10a3:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">       48</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 83</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> c4</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 18</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">             add</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    $0x18</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,%rsp</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    10a7:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">       c3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                      ret</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    10a8:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">       e8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ff</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          call</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   1050</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">__stack_chk_fail@pl</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    10ad:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">       0f</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 1f</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 00</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">                nopl</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">   (%rax)</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>经过修正后&quot;shared&quot;和&quot;swap&quot;地址分别为0x4010和0x11a0</p><div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" data-title="txt" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>shared的地址: 0x106f + 0x2fa1 = 0x4010</span></span>\n<span class="line"><span>    1068:       48 8d 35 a1 2f 00 00    lea    0x2fa1(%rip),%rsi</span></span>\n<span class="line"><span>    106f:       64 48 8b 04 25 28 00    mov    %fs:0x28,%rax</span></span>\n<span class="line"><span>swap的地址: 0x1091 + 0x010f = 0x11a0</span></span>\n<span class="line"><span>    108c:       e8 0f 01 00 00          call   11a0 &lt;swap&gt;</span></span>\n<span class="line"><span>    1091:       48 8b 44 24 08          mov    0x8(%rsp),%rax</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="_2-2-重定位表" tabindex="-1"><a class="header-anchor" href="#_2-2-重定位表"><span>2.2 重定位表</span></a></h3><div class="hint-container note"><p class="hint-container-title">注</p><p>使用objdump/readelf指令可以查看重定位文件。因为重定位表其实就是elf文件中的一个段，因此又被称为重定位段，比如代码段&quot;.text&quot;如果有要重定位的地方，那么会有一个相应的叫&quot;.rel.text&quot;的段保存了代码段的重定位表，同理&quot;.data&quot;也会有一个叫&quot;.rel.data&quot;的段。</p></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># a.o中所有要重定位的地方，既“a.o”所有引用到的外部符号。</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">bjdump</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a.o</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">a.o:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> format</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> elf64-x86-64</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">RELOCATION</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> RECORDS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> FOR</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [.text.startup]:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">OFFSET</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">           TYPE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">              VALUE</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">000000000000000b</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> R_X86_64_PC32</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     shared-0x0000000000000004</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> # pc（下一条指令） - 0x04</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">000000000000002d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> R_X86_64_PLT32</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    swap-0x0000000000000004</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000049</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> R_X86_64_PLT32</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    __stack_chk_fail-0x0000000000000004</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">RELOCATION</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> RECORDS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> FOR</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [.eh_frame]:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">OFFSET</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">           TYPE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">              VALUE</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000020</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> R_X86_64_PC32</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     .text.startup</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">readelf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a.o</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Relocation</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> section</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;.rela.text.startup&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> offset</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0x1e8</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> contains</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> entries:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  Offset</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          Info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">           Type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">           Sym.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Value</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    Sym.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Addend</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  00000000000b</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  000400000002</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> R_X86_64_PC32</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> shared</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  00000000002d</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  000500000004</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> R_X86_64_PLT32</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> swap</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  000000000049</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  000600000004</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> R_X86_64_PLT32</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> __stack_chk_fail</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  Relocation</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> section</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;.rela.eh_frame&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> at</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> offset</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0x230</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> contains</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> entry:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    Offset</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          Info</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">           Type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">           Sym.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Value</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    Sym.</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Addend</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    000000000020</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  000200000002</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> R_X86_64_PC32</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text.startup</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每一个被重定位的地方叫一个<mark>重定位入口(Relocation Entry)</mark>，其中每个重定位表包含了一下信息：</p><ol><li>重定位入口的<mark>偏移(offset)</mark>，表示该入口在要被重定位段中的位置。</li><li>该重定位表作用的elf文件中的那个段<mark>RELOCATION RECORDS FOR [.text.startup](比如这个就是代码段)</mark>。</li></ol><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 重定位表的结构</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> struct</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  Elf64_Addr\tr_offset;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">\t\t/* Address */</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  Elf64_Xword\tr_info;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">\t\t\t/* Relocation type and symbol index */</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">} Elf64_Rel;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/image/linker/chapter03/重定位表结构.png" alt="重定位表结构" tabindex="0" loading="lazy"><figcaption>重定位表结构</figcaption></figure><h3 id="_2-3-符号解析" tabindex="-1"><a class="header-anchor" href="#_2-3-符号解析"><span>2.3 符号解析</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 符号未定义错误 (未正确链接目标文件或者库文件导致)</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">gcc</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a.c</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">a.c:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> In</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> function</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ‘main’:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">a.c:5:3:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> warning:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> implicit</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> declaration</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> function</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ‘swap’</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [-Wimplicit-function-declaration]</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    5</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   swap(</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">a,</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">shared</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">      |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   ^~~~</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/usr/bin/ld:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /tmp/ccwmM6Jl.o:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> warning:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> relocation</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> against</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">shared&#39; in read-only section `.text&#39;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/usr/bin/ld:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /tmp/ccwmM6Jl.o: in function `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">main</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">&#39;:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">a.c:(.text+0x29): undefined reference to `shared&#39;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/usr/bin/ld:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a.c:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">.text+0x39</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> undefined</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> reference</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">swap&#39;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">/usr/bin/ld: warning: creating DT_TEXTREL in a PIE</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">collect2: error: ld returned 1 exit status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container note"><p class="hint-container-title">注</p><p>重定位的过程也伴随着符号解析的过程。每个目标文件都可能定义一些符号，也可能引用其它目标文件的符号。重定位过程中，每个重定位入口都是对一个符号的引用，那么当连接器需要对某个符号的引用进行重定位时，就要确定这个符号的目的地址。这时候连接器就会查找所有输入目标文件的符号表组成的全局符号表，找到相应的符号后进行重定位。</p></div><div class="hint-container note"><p class="hint-container-title">注</p><p>需要补充的一点是linux链接器在符号解析阶段，链接器是从左到右按照它们在编译器取得程序命令行上出现的顺序来扫描可重定位目标文件和存档文件(静态库)的。链接器维护一个可重定位目标文件的集合E（这个集合中的文件会被合并起来形成可执行文件），一个未解析的符号集合U（即引用了但尚未定义的符号），以及一个在前面输入文件中已定义的符号集合D。</p><p>·对于命令行上的每个输入文件 f, 链接器会判断f是一个目标文件还是一个存档文件。如果f是一个目标文件，那么链接器把f添加到E, 修改U和D来反映f中的符号定义和引用，并继续下一个输入文件。</p><p>·如果f是一个存档文件，那么链接器就尝试匹配U中未解析的符号和由存档文件成员定义的符号。如果某个存档文件成员m, 定义了一个符号来解析U中的一个引用，那将m加到么就E中，并且链接器修改U和D来反映m中的符号定义和引用。对存档文件中所有的成员目标文件都依次进行这个过程，直到U和D都不再发生变化。此时，任何不包含在E中的成员目标文件都简单地被丢弃，而链接器将继续处理下一个输入文件。</p><p>·如果当链接器完成对命令行上输入文件的扫描后，U是非空的，那么链接器就会输出一个错误并终止。否则，它会合并和重定位E中的目标文件，构建输出的可执行文件。</p><p>这样的解析通常会伴随一个顺序问题，比如文件foo.c依赖与liba.a。当输入指令如下时就会出现符号未定义错误。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 错误的</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">gcc</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -static</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./liba.a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> foo.c</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 正确的</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">gcc</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -static</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> foo.c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./liba.a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因为链接器时从左到右开始扫描的，而静态库文件（存档文件）liba.a先于foo.c文件所以就会执行上述的存档文件的操作导致foo.c依赖的文件不会并入集合中。最终导致符号未定义行为，特别是出现相互依赖的库文件时更容易出现这种错误。<br> foo.c 依赖 liba.a, liba.a 依赖 libb.a, libb.a 依赖 liba.a</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 错误的</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">gcc</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -static</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> foo.c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./liba.a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./libb.a</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 正确的</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">gcc</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -static</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> foo.c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./liba.a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./libb.a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./liba.a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><mark>csapp 第七章 7.6.3</mark></p></div><p>使用readelf -s指令查看a.o的符号表:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;  </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">readelf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a.o</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Symbol</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> table</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;.symtab&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> contains</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 7</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> entries:</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">   Num:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    Value</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">          Size</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Type</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    Bind</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   Vis</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">      Ndx</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Name</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     0:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NOTYPE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  LOCAL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  UND</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     1:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> FILE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    LOCAL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  ABS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a.c</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     2:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> SECTION</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LOCAL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     3:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    88</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> FUNC</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    GLOBAL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> main</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     4:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NOTYPE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  GLOBAL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  UND</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> shared</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     5:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NOTYPE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  GLOBAL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  UND</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> swap</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">     6:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> NOTYPE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  GLOBAL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  UND</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> __stack_chk_fail</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p><mark>GLOBAL</mark>类型的符号，除了&quot;main&quot;函数是定义在代码段之外，其它几个&quot;shared&quot;，&quot;swap&quot;，&quot;__stack_chk_fail&quot;都是<mark>UND（undefined）未定义的类型</mark>，这种未定义的符号都是该目标文件的<mark>重定位项</mark>。所以在链接器扫描完所有的输入目标文件后，所有这些未定义的符号都应该能在<mark>全局符号表</mark>中找到，否则链接就会报符号<mark>未定义错误</mark>。</p></div><h3 id="_2-4-指令修正方式-参考csapp-原书第七章-7-7" tabindex="-1"><a class="header-anchor" href="#_2-4-指令修正方式-参考csapp-原书第七章-7-7"><span>2.4 指令修正方式(参考csapp，原书第七章 7.7)</span></a></h3><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// csapp提到的另一种重定位结构</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// r_addend: 有符号常数，一些类型的重定位要使用它对被修改引用的值做偏移调整。</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> struct</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  Elf64_Addr\tr_offset;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">\t\t/* Address */</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  Elf64_Xword\tr_info;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">\t\t\t/* Relocation type and symbol index */</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  Elf64_Sxword\tr_addend;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">\t\t/* Addend */</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">} Elf64_Rela;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>elf定义了32种不同的重定位类型。我们只关心其中两种最基本的重定位类型：</p><ul><li>R_X86_64_PC32。重定位一个使用32位PC相对地址的引用。一个PC相对地址就是距程序计数器(PC)的当前运行时值的偏移量。CPU执行一条使用PC相对寻址的指令时，它就将在指令中编码的32位值加上PC的当前运行时值，得到有效地址，PC值通常是下一条指令在内存中的值。</li><li>R_X86_64_32。重定位一个使用32位绝对地址的引用。CPU直接使用在指令中编码的32值作为有效地址，不需要进一步修改。</li></ul><div class="hint-container important"><p class="hint-container-title">重要</p><p>这两种重定位类型支持x86-64小型代码模型(small code model)，该模型假设可执行目标文件中的代码和数据的总体大小小于2GB，因此在运行时可以用32位PC相对地址来访问。GCC默认使用小型代码模型。大于2GB的程序可以使用-mcmodel=medium(中型代码模型)和-mcmodel=large(大型代码模型)标志来编译。</p></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>foreach section s {</span></span>\n<span class="line"><span>  foreach relocation entry r {</span></span>\n<span class="line"><span>    refptr = s + r.offset; // 需要修改的重定位地址</span></span>\n<span class="line"><span>    if (r.type == R_X86_64_PC32) {</span></span>\n<span class="line"><span>      refaddr = ADDR(s) + r.offset; // 运行时引用符号的地址</span></span>\n<span class="line"><span>      *refptr = (unsigned)(ADDR(r.symbol) + r.addend - refaddr); // 被引用的符号地址 + 修正值 - 运行时引用符号地址。</span></span>\n<span class="line"><span>    }</span></span>\n<span class="line"><span>    if (r.type == R_X86_64_32) {</span></span>\n<span class="line"><span>      *refptr = (unsigned)(ADDR(r.symbol) + r.addend);</span></span>\n<span class="line"><span>    }</span></span>\n<span class="line"><span>  }</span></span>\n<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-common块" tabindex="-1"><a class="header-anchor" href="#_3-common块"><span>3. COMMON块</span></a></h2><div class="hint-container note"><p class="hint-container-title">注</p><p>COMMON块的机制来源于Fortran，早期的Fortran没有动态分配空间的机制，所以必须事先声明它所需的临时使用空间的大小。Fortran把这种空间叫COMMON块，当不同的目标文件需要的COMMON块空间大小不一致时，以最大的那块为准。<br> 现代的链接机制在处理弱符号时，采用的就是与COMMON块一样的机制。当然COMMON块的链接规则仅仅是针对弱符号的，如果其中有一个符号为强符号时，那么最终输出结果中的符号所占空间与强符号相同。<br> 值得注意的是，如果链接过程中有弱符号大于强符号所使用的内存大小，那么链接器通常会给出警告。<br> /usr/bin/ld: warning: alignment 4 of symbol `global&#39; in /tmp/ccjFgL1Q.o is smaller than 8 in /tmp/ccVEFqSm.o</p></div><p>另外值得注意的是可能有些编译器并不是将弱符号使用COMMON块，而是使用的bss段，因此会报重定义错误。此时可以给编译选项加上--common选项即可。</p><h2 id="_4-静态库链接" tabindex="-1"><a class="header-anchor" href="#_4-静态库链接"><span>4. 静态库链接</span></a></h2><div class="hint-container note"><p class="hint-container-title">注</p><p>静态库可以简单的看成一组目标文件的集合，既很多目标文件经过压缩打包后形成的一个文件。</p></div><p>使用&quot;ar&quot;工具查看这个文件包含了那些目标文件：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ar</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/lib/x86_64-linux-gnu/libc.a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>使用objdump指令查看某个符号在那个文件中</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">objdump</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /usr/lib/x86_64-linux-gnu/libc.a</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> vprintf</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">vprintf.o:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> format</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> elf64-x86-64</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     F</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000018</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> __vprintf</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     F</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000018</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> vprintf</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000160</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     F</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00000000000001c9</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .hidden</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> __obstack_vprintf_internal</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000330</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     F</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00000000000001c4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> __obstack_vprintf</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000330</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  w</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    F</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  00000000000001c4</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> obstack_vprintf</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">vprintf_chk.o:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     file</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> format</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> elf64-x86-64</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     F</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000019</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ___vprintf_chk</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     F</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000019</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> __vprintf_chk</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">         *</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">UND</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .hidden</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> __obstack_vprintf_internal</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> g</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">     F</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .text</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  000000000000001c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> __obstack_vprintf_chk</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">0000000000000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">         *</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">UND</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  0000000000000000</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .hidden</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> __obstack_vprintf_interna</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',50)],l={},k=(0,a(6262).A)(l,[["render",function(s,i){return(0,n.uX)(),(0,n.CE)("div",null,h)}]]),t=JSON.parse('{"path":"/cs/linker/chapter03.html","title":"第三章 静态链接","lang":"zh-CN","frontmatter":{"title":"第三章 静态链接","date":"2024-06-29T00:00:00.000Z","tags":["计算机基础","c/c++"],"categories":"链接、装载与库","isOriginal":true,"order":3,"dir":{"order":3},"description":"1. 空间与地址分配 注 链接的过程就是将几个输入目标文件加工合并成一个输出文件的过程。 1.1 按序叠加 注 什么是按序叠加？ 就是将各个目标文件依次合并。但是这样会有些问题，当输入文件很多时，如果每个段都分别有.text段、.data段和.bss段，那最后输出文件将会有成百上千零散的段。这种做法是很浪费内存空间的（主要原因是内存对齐），对于x86的...","head":[["meta",{"property":"og:url","content":"https://hncat.github.io/cs/linker/chapter03.html"}],["meta",{"property":"og:site_name","content":"far"}],["meta",{"property":"og:title","content":"第三章 静态链接"}],["meta",{"property":"og:description","content":"1. 空间与地址分配 注 链接的过程就是将几个输入目标文件加工合并成一个输出文件的过程。 1.1 按序叠加 注 什么是按序叠加？ 就是将各个目标文件依次合并。但是这样会有些问题，当输入文件很多时，如果每个段都分别有.text段、.data段和.bss段，那最后输出文件将会有成百上千零散的段。这种做法是很浪费内存空间的（主要原因是内存对齐），对于x86的..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://hncat.github.io/image/linker/chapter03/按序叠加内存分配.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-10T00:54:45.000Z"}],["meta",{"property":"article:author","content":"Mr.far"}],["meta",{"property":"article:tag","content":"计算机基础"}],["meta",{"property":"article:tag","content":"c/c++"}],["meta",{"property":"article:published_time","content":"2024-06-29T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-10T00:54:45.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"第三章 静态链接\\",\\"image\\":[\\"https://hncat.github.io/image/linker/chapter03/按序叠加内存分配.png\\",\\"https://hncat.github.io/image/linker/chapter03/相似段合并.png\\",\\"https://hncat.github.io/image/linker/chapter03/重定位表结构.png\\"],\\"datePublished\\":\\"2024-06-29T00:00:00.000Z\\",\\"dateModified\\":\\"2024-07-10T00:54:45.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.far\\",\\"url\\":\\"https://hncat.github.io\\"}]}"]]},"headers":[{"level":2,"title":"1. 空间与地址分配","slug":"_1-空间与地址分配","link":"#_1-空间与地址分配","children":[{"level":3,"title":"1.1 按序叠加","slug":"_1-1-按序叠加","link":"#_1-1-按序叠加","children":[]},{"level":3,"title":"1.2 相似段合并","slug":"_1-2-相似段合并","link":"#_1-2-相似段合并","children":[]},{"level":3,"title":"1.3 符号地址的确定","slug":"_1-3-符号地址的确定","link":"#_1-3-符号地址的确定","children":[]}]},{"level":2,"title":"2. 符号解析与重定位","slug":"_2-符号解析与重定位","link":"#_2-符号解析与重定位","children":[{"level":3,"title":"2.1 重定位","slug":"_2-1-重定位","link":"#_2-1-重定位","children":[]},{"level":3,"title":"2.2 重定位表","slug":"_2-2-重定位表","link":"#_2-2-重定位表","children":[]},{"level":3,"title":"2.3 符号解析","slug":"_2-3-符号解析","link":"#_2-3-符号解析","children":[]},{"level":3,"title":"2.4 指令修正方式(参考csapp，原书第七章 7.7)","slug":"_2-4-指令修正方式-参考csapp-原书第七章-7-7","link":"#_2-4-指令修正方式-参考csapp-原书第七章-7-7","children":[]}]},{"level":2,"title":"3. COMMON块","slug":"_3-common块","link":"#_3-common块","children":[]},{"level":2,"title":"4. 静态库链接","slug":"_4-静态库链接","link":"#_4-静态库链接","children":[]}],"git":{"createdTime":1719811002000,"updatedTime":1720572885000,"contributors":[{"name":"far","email":"v19991123v@163.com","commits":6}]},"readingTime":{"minutes":15.31,"words":4593},"filePathRelative":"cs/linker/chapter03.md","localizedDate":"2024年6月29日","excerpt":"<div class=\\"language-c line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"c\\" data-title=\\"c\\" style=\\"--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes github-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">// a.c</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">extern</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> shared;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">int</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\"> main</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">  int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> a </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 100</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">  swap</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">&amp;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">a, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">&amp;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">shared);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">  return</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">// b.c</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> shared </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\"> swap</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">int</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> *</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">a</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">,</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> int</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> *</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">b</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">  *</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">a </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">^=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> *</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">b </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">^=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> *</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">a </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">^=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> *</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">b;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">}</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}')}}]);